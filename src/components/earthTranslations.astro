---
const { language } = Astro.props;

const lang: any = await import(`../../public/locales/${language}/translation.json`);
if (!lang) throw new Error('Language file could not be loaded');

const langMap = [
  { key: 'en', text: lang.languages.english },
  { key: 'es', text: lang.languages.spanish },
  { key: 'cat', text: lang.languages.catalan },
  // Añade aquí otros idiomas según sea necesario
];
---

<style>
  /* Style The Dropdown Button */
  .dropbtn {
    color: white;
    padding: 16px;
    font-size: 16px;
    border-radius: 60%;
    cursor: pointer;
  }
  
  /* The container <div> - needed to position the dropdown content */
  .dropdown {
    position: relative;
    display: inline-block;
  }
  
  /* Dropdown Content (Hidden by Default) */
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #222222;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
    left: 50%; /* Posiciona el dropdown al 50% del contenedor */
    transform: translateX(-50%); /* Traduce el dropdown hacia la izquierda para centrarlo */
    border-radius: 0%;
  }
  
  /* Links inside the dropdown */
  .dropdown-content a {
    color: white;
    padding: 10px;
    text-decoration: none;
    display: block;
  }
  
  /* Change color of dropdown links on hover */
  .dropdown-content a:hover {
    background-color: #303030;
    color: #d98c3b;

  }
  
  /* Show the dropdown menu on hover */
  .dropdown:hover .dropdown-content {
    display: block;
  }
  
  /* Change the background color of the dropdown button when the dropdown content is shown */
  .dropdown:hover .dropbtn {
    background-color: #d98c3b;
  }
</style>

<html>
  <body>
    <div class="dropdown">
      <button class="dropbtn">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="#a3a3a3" xmlns="http://www.w3.org/2000/svg"><path d="M12 1.5A10.5 10.5 0 1 0 22.5 12 10.512 10.512 0 0 0 12 1.5Zm9.475 10h-4.552a17.954 17.954 0 0 0-2.712-8.729 9.5 9.5 0 0 1 7.264 8.729ZM12.87 2.544a17.144 17.144 0 0 1 3.053 8.956H8.077a17.144 17.144 0 0 1 3.053-8.956c.287-.026.576-.044.87-.044s.583.018.87.044Zm-3.081.227A17.954 17.954 0 0 0 7.077 11.5H2.525a9.5 9.5 0 0 1 7.264-8.729ZM2.525 12.5h4.552a17.954 17.954 0 0 0 2.712 8.729A9.5 9.5 0 0 1 2.525 12.5Zm8.605 8.956A17.144 17.144 0 0 1 8.077 12.5h7.846a17.144 17.144 0 0 1-3.053 8.956c-.287.026-.576.044-.87.044s-.583-.018-.87-.044Zm3.081-.227a17.954 17.954 0 0 0 2.712-8.729h4.552a9.5 9.5 0 0 1-7.264 8.729Z"></path></svg>
      </button>
      <div class="dropdown-content">
        {langMap.map((lang) => (
          <a href={`/${lang.key}`}>
            {lang.text}
          </a>
        ))}
      </div>
    </div>
  </body>
</html>
